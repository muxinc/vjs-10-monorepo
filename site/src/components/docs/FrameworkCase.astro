---
import type { SupportedFramework } from '@/types/docs';

interface Props {
  frameworks?: SupportedFramework[];
  /**
   * I'm running into some crazy problems with hydration.
   * Putting client:load in one of these conditionals causes Astro to just give up hydrating the whole app for some reason.
   * If you're running into that, too, this prop may be for you.
   */
  withHydrationWorkaround?: boolean;
}

const { frameworks, withHydrationWorkaround } = Astro.props;
const { framework } = Astro.params;

// Only render if current framework matches, or if no frameworks specified (all frameworks)
const shouldRender = !frameworks || frameworks.includes(framework as SupportedFramework);
---

{
  withHydrationWorkaround ? (
    <div class="contents" hidden={!shouldRender}>
      <slot />
    </div>
  ) : (
    shouldRender && <slot />
  )
}
