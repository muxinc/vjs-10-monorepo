/*
 * Simplified CSS Module version of frosted skin styles
 * Structurally similar to frosted-css-module but with broken @apply patterns commented out
 *
 * WHAT BREAKS @apply (verified by testing):
 * - Named group/container declarations: group/root, @container/controls, group/button, group/slider
 *   Error: "Cannot apply unknown utility class `group/button`"
 *
 * REPLACEMENTS:
 * - Use :has() for parent-child coordination where possible
 * - Use regular CSS selectors with :hover for hover coordination
 * - Skip container query responsive typography (@7xl/root)
 */

@reference "../../globals.css";

.MediaContainer {
  /* REMOVED (breaks @apply): @container/root group/root */
  @apply relative overflow-clip;
  /* Base typography */
  @apply text-sm;
  /* Prevent rounded corners in fullscreen. */
  @apply [&:fullscreen]:rounded-none [&:fullscreen]:[&_video]:h-full [&:fullscreen]:[&_video]:w-full;
  /* Fancy borders. */
  @apply after:absolute after:inset-0 after:ring-black/10 after:ring-1 dark:after:ring-black/40 after:ring-inset after:z-10 after:pointer-events-none after:rounded-[inherit];
  @apply before:absolute before:inset-px before:rounded-[inherit] before:ring-white/15 before:ring-1 before:ring-inset before:z-10 before:pointer-events-none;
  /* Ensure the nested video inherits the radius. */
  @apply [&_video]:rounded-[inherit] [&_video]:w-full [&_video]:h-auto;
}

.Overlay {
  @apply opacity-0 delay-500 rounded-[inherit] absolute inset-0 pointer-events-none bg-gradient-to-t from-black/50 via-black/20 to-transparent transition-opacity backdrop-saturate-150 backdrop-brightness-90;
  /* Hide when playing (for now). */
  @apply has-[+.controls_[data-paused]]:opacity-100 has-[+.controls_[data-paused]]:delay-0;
  /* REMOVED (breaks @apply): group-hover/root:opacity-100 group-hover/root:delay-0 */
}

/* REPLACEMENT for group-hover/root on .Overlay */
.MediaContainer:hover .Overlay {
  @apply opacity-100 delay-0;
}

.Controls {
  /* REMOVED (breaks @apply): @container/controls */
  /* REMOVED (breaks @apply): text-shadow (custom utility not in standard Tailwind) */
  @apply absolute inset-x-3 bottom-3 rounded-full flex items-center p-1 ring ring-white/10 ring-inset gap-0.5 text-white;
  @apply shadow-sm shadow-black/15;
  /* Background */
  @apply bg-white/10 backdrop-blur-3xl backdrop-saturate-150 backdrop-brightness-90;
  /* Animation */
  @apply transition will-change-transform origin-bottom ease-out;
  /* FIXME: Temporary hide/show logic */
  @apply scale-90 opacity-0 delay-500;
  @apply has-[[data-paused]]:scale-100 has-[[data-paused]]:opacity-100 has-[[data-paused]]:delay-0;
  /* REMOVED (breaks @apply): group-hover/root:scale-100 group-hover/root:opacity-100 group-hover/root:delay-0 */
  /* Border to enhance contrast on lighter videos */
  @apply after:absolute after:inset-0 after:ring after:rounded-[inherit] after:ring-black/15 after:pointer-events-none after:z-10;
  /* REMOVED (breaks @apply): reduced-transparency:* (custom variant - requires @custom-variant) */
  /* REMOVED (breaks @apply): contrast-more:* (custom variant - requires @custom-variant) */
}

/* REPLACEMENT for group-hover/root on .Controls */
.MediaContainer:hover .Controls {
  @apply scale-100 opacity-100 delay-0;
}

.Button {
  /* REMOVED (breaks @apply): group/button */
  @apply cursor-pointer relative shrink-0 transition select-none p-2 rounded-full;
  /* Background/foreground */
  @apply bg-transparent text-white/90;
  /* Hover and focus states */
  @apply hover:no-underline hover:bg-white/10 hover:text-white focus-visible:no-underline focus-visible:bg-white/10 focus-visible:text-white;
  /* Focus state */
  @apply -outline-offset-2 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500;
  /* Disabled state */
  @apply aria-disabled:grayscale aria-disabled:opacity-50 aria-disabled:cursor-not-allowed;
  /* Loading state */
  @apply aria-busy:pointer-events-none aria-busy:cursor-not-allowed;
  /* Expanded state */
  @apply aria-expanded:bg-white/10 aria-expanded:text-white;
  /* Pressed state */
  @apply active:scale-95;
}

.IconButton {
  @apply grid [&_svg]:[grid-area:1/1];
  @apply [&_svg]:shrink-0 [&_svg]:transition-opacity [&_svg]:duration-300 [&_svg]:ease-out [&_svg]:drop-shadow-[0_1px_0_var(--tw-shadow-color)] [&_svg]:shadow-black/20;
}

.PlayButton {
  @apply [&_.pause-icon]:opacity-100 [&[data-paused]_.pause-icon]:opacity-0;
  @apply [&_.play-icon]:opacity-0 [&[data-paused]_.play-icon]:opacity-100;
}

.PlayIcon {
  @apply play-icon;
}

.PauseIcon {
  @apply pause-icon;
}

.TooltipPopup {
  /* REMOVED (breaks @apply): @7xl/root:text-sm (container query) */
  @apply whitespace-nowrap flex origin-[var(--transform-origin)] flex-col rounded-md text-white text-xs px-2 py-1;
  /* Background */
  @apply bg-white/10 backdrop-blur-3xl backdrop-saturate-150 backdrop-brightness-90;
  /* Animation */
  @apply transition-[transform,scale,opacity] data-[ending-style]:scale-90 data-[ending-style]:opacity-0 data-[instant]:duration-0 data-[starting-style]:scale-90 data-[starting-style]:opacity-0;
  /* Ring */
  @apply ring-1 ring-white/10 ring-inset;
  /* REMOVED (breaks @apply): text-shadow (custom utility not in standard Tailwind) */
  /* Border to enhance contrast on lighter videos */
  @apply after:absolute after:inset-0 after:ring after:rounded-[inherit] after:ring-black/15 after:pointer-events-none;
}

.PlayTooltipPopup {
  @apply [&_.pause-tooltip]:inline [&[data-paused]_.pause-tooltip]:hidden;
  @apply [&_.play-tooltip]:hidden [&[data-paused]_.play-tooltip]:inline;
}

.PlayTooltip {
  @apply play-tooltip;
}

.PauseTooltip {
  @apply pause-tooltip;
}

.MuteButton {
  @apply [&_svg]:opacity-0;
  @apply [&[data-volume-level="high"]_.volume-high-icon]:opacity-100;
  @apply [&[data-volume-level="medium"]_.volume-low-icon]:opacity-100;
  @apply [&[data-volume-level="low"]_.volume-low-icon]:opacity-100;
  @apply [&[data-volume-level="off"]_.volume-off-icon]:opacity-100;
}

.VolumeHighIcon {
  @apply volume-high-icon;
}

.VolumeLowIcon {
  @apply volume-low-icon;
}

.VolumeOffIcon {
  @apply volume-off-icon;
}

.FullScreenButton {
  @apply [&_.fullscreen-enter-icon]:opacity-100 [&[data-fullscreen]_.fullscreen-enter-icon]:opacity-0;
  @apply [&_.fullscreen-exit-icon]:opacity-0 [&[data-fullscreen]_.fullscreen-exit-icon]:opacity-100;
  @apply [&_path]:transition-transform [&_path]:ease-out;
}

.FullScreenEnterIcon {
  @apply fullscreen-enter-icon;
  /* REMOVED (breaks @apply): group-hover/button:[&_.arrow-1]:-translate-x-px group-hover/button:[&_.arrow-1]:-translate-y-px */
  /* REMOVED (breaks @apply): group-hover/button:[&_.arrow-2]:translate-x-px group-hover/button:[&_.arrow-2]:translate-y-px */
}

/* REPLACEMENT for group-hover/button on .FullScreenEnterIcon arrows */
.Button:hover .FullScreenEnterIcon .arrow-1 {
  @apply -translate-x-px -translate-y-px;
}

.Button:hover .FullScreenEnterIcon .arrow-2 {
  @apply translate-x-px translate-y-px;
}

.FullScreenExitIcon {
  @apply fullscreen-exit-icon;
  @apply [&_.arrow-1]:-translate-x-px [&_.arrow-1]:-translate-y-px;
  @apply [&_.arrow-2]:translate-x-px [&_.arrow-2]:translate-y-px;
  /* REMOVED (breaks @apply): group-hover/button:[&_.arrow-1]:translate-0 */
  /* REMOVED (breaks @apply): group-hover/button:[&_.arrow-2]:translate-0 */
}

/* REPLACEMENT for group-hover/button on .FullScreenExitIcon arrows */
.Button:hover .FullScreenExitIcon .arrow-1,
.Button:hover .FullScreenExitIcon .arrow-2 {
  @apply translate-x-0 translate-y-0;
}

.FullScreenTooltipPopup {
  @apply [&_.fullscreen-enter-tooltip]:inline [&[data-fullscreen]_.fullscreen-enter-tooltip]:hidden;
  @apply [&_.fullscreen-exit-tooltip]:hidden [&[data-fullscreen]_.fullscreen-exit-tooltip]:inline;
}

.FullScreenEnterTooltip {
  @apply fullscreen-enter-tooltip;
}

.FullScreenExitTooltip {
  @apply fullscreen-exit-tooltip;
}

.TimeControls {
  @apply flex-1 flex items-center gap-3 px-1.5;
}

.TimeDisplay {
  /* REMOVED (breaks @apply): text-shadow-2xs (custom utility not in standard Tailwind) */
  @apply tabular-nums;
}

.SliderRoot {
  /* REMOVED (breaks @apply): group/slider */
  @apply flex items-center justify-center flex-1 relative;
  @apply [&[data-orientation="horizontal"]]:h-5 [&[data-orientation="horizontal"]]:min-w-20;
  @apply [&[data-orientation="vertical"]]:w-5 [&[data-orientation="vertical"]]:h-20;
}

.SliderTrack {
  @apply w-full relative select-none rounded-full bg-white/20 ring-1 ring-black/5;
  @apply [&[data-orientation="horizontal"]]:h-1;
  @apply [&[data-orientation="vertical"]]:w-1;
}

.SliderProgress {
  @apply bg-white rounded-[inherit];
}

.SliderPointer {
  @apply rounded-[inherit];
}

.SliderThumb {
  @apply bg-white z-10 select-none ring ring-black/10 rounded-full shadow-sm shadow-black/15;
  @apply opacity-0 transition-[opacity,height,width] ease-in-out;
  @apply -outline-offset-2 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500;
  /* REMOVED (breaks @apply): group-hover/slider:opacity-100 group-focus-within/slider:opacity-100 */
  @apply size-2.5 active:size-3 hover:cursor-ew-resize;
  /* REMOVED (breaks @apply): group-active/slider:size-3 */
}

/* REPLACEMENT for group-hover/slider and group-focus-within/slider on .SliderThumb */
.SliderRoot:hover .SliderThumb,
.SliderRoot:focus-within .SliderThumb {
  @apply opacity-100;
}

/* REPLACEMENT for group-active/slider on .SliderThumb */
.SliderRoot:active .SliderThumb {
  @apply size-3;
}

.PopoverPopup {
  @apply relative px-2 py-4 rounded-2xl;
  @apply bg-white/10 backdrop-blur-3xl backdrop-saturate-150 backdrop-brightness-90;
  @apply ring ring-white/10 ring-inset shadow-sm shadow-black/15;
  /* Border to enhance contrast on lighter videos */
  @apply after:absolute after:inset-0 after:ring after:rounded-[inherit] after:ring-black/15 after:pointer-events-none after:z-10;
  /* REMOVED (breaks @apply): reduced-transparency:* (custom variant - requires @custom-variant) */
  /* REMOVED (breaks @apply): contrast-more:* (custom variant - requires @custom-variant) */
}

/*
NOTE: Requires Tailwind custom variant:
@custom-variant reduced-transparency @media (prefers-reduced-transparency: reduce);
*/
